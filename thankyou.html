<!DOCTYPE html>
<html lang="zxx">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <!-- bootstrap grid css -->
    <link rel="stylesheet" href="css/plugins/bootstrap-grid.css">
    <!-- font awesome css -->
    <link rel="stylesheet" href="css/plugins/font-awesome.min.css">
    <!-- swiper css -->
    <link rel="stylesheet" href="css/plugins/swiper.min.css">
    <!-- fancybox css -->
    <link rel="stylesheet" href="css/plugins/fancybox.min.css">
    <!-- corder scss -->
    <link rel="stylesheet" href="css/style.css">
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-functions-compat.js"></script>
    <!-- page name -->
    <title>Thank You | Corder</title>
    <style>
        .mil-thankyou-card {
            background: #fff;
            border-radius: 16px;
            padding: 40px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            text-align: center;
            max-width: 500px;
            margin: 0 auto;
        }
        .mil-success-icon {
            width: 80px;
            height: 80px;
            background: #28a745;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 30px;
            color: white;
            font-size: 40px;
        }
        .mil-order-details {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 24px;
            margin: 30px 0;
            text-align: left;
        }
        .mil-detail-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #e9ecef;
        }
        .mil-detail-row:last-child {
            border-bottom: none;
        }
        .mil-detail-label {
            font-weight: 600;
            color: #495057;
        }
        .mil-detail-value {
            color: #212529;
        }
        .mil-progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin: 8px 0;
        }
        .mil-progress-fill {
            height: 100%;
            background: #e5cb67;
            transition: width 0.3s ease;
        }
        .mil-arrival-time {
            color: #e5cb67;
            font-weight: 600;
        }
        .mil-group-filled {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 8px;
            padding: 16px;
            margin: 20px 0;
            color: #155724;
        }
        .mil-group-filled h5 {
            color: #155724;
            margin-bottom: 8px;
        }
        .mil-direct-order {
            display: none;
        }
        .mil-group-order {
            display: none;
        }

    </style>
</head>

<body>
    <!-- wrapper -->
    <div class="mil-wrapper" id="top">
        <!-- cursor -->
        <div class="mil-ball">
            <span class="mil-icon-1">
                <svg viewBox="0 0 128 128">
                    <path d="M106.1,41.9c-1.2-1.2-3.1-1.2-4.2,0c-1.2,1.2-1.2,3.1,0,4.2L116.8,61H11.2l14.9-14.9c1.2-1.2,1.2-3.1,0-4.2	c-1.2-1.2-3.1-1.2-4.2,0l-20,20c-1.2,1.2-1.2,3.1,0,4.2l20,20c0.6,0.6,1.4,0.9,2.1,0.9s1.5-0.3,2.1-0.9c1.2-1.2,1.2-3.1,0-4.2	L11.2,67h105.5l-14.9,14.9c-1.2,1.2-1.2,3.1,0,4.2c0.6,0.6,1.4,0.9,2.1,0.9s1.5-0.3,2.1-0.9l20-20c1.2-1.2,1.2-3.1,0-4.2L106.1,41.9	z" />
                </svg>
            </span>
            <div class="mil-more-text">More</div>
            <div class="mil-choose-text">Ð¡hoose</div>
        </div>
        <!-- cursor end -->

        <!-- preloader -->
        <div class="mil-preloader">
            <div class="mil-preloader-animation">
                <div class="mil-pos-abs mil-animation-1">
                    <p class="mil-h3 mil-muted mil-thin">Pioneer</p>
                    <p class="mil-h3 mil-muted">Creative</p>
                    <p class="mil-h3 mil-muted mil-thin">Community</p>
                </div>
                <div class="mil-pos-abs mil-animation-2">
                    <div class="mil-reveal-frame">
                        <p class="mil-reveal-box"></p>
                        <p class="mil-h3 mil-muted mil-thin">corder.com</p>
                    </div>
                </div>
            </div>
        </div>
        <!-- preloader end -->

        <!-- scrollbar progress -->
        <div class="mil-progress-track">
            <div class="mil-progress"></div>
        </div>
        <!-- scrollbar progress end -->

        <!-- menu -->
        <div class="mil-menu-frame">
            <!-- frame clone -->
            <div class="mil-frame-top">
                <a href="index.html" class="mil-logo">C.</a>
                <div class="mil-menu-btn">
                    <span></span>
                </div>
            </div>
            <!-- frame clone end -->
            <div class="container">
                <div class="mil-menu-content">
                    <div class="row">
                        <div class="col-xl-5">
                            <nav class="mil-main-menu" id="swupMenu">
                                <ul>
                                    <li class="mil-has-children">
                                        <a href="index.html">Homepage</a>
                                    </li>
                                    <li class="mil-has-children">
                                        <a href="services.html">Services</a>
                                    </li>
                                    <li class="mil-has-children ">
                                        <a href="blog.html">Blogs</a>
                                    </li>
                                    <li class="mil-has-children">
                                        <a href="beta.html">Beta</a>
                                    </li>
                                    <li class="mil-has-children">
                                        <a href="#.">Other pages</a>
                                        <ul>
                                            <li><a href="contact.html">Contact</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                        <div class="col-xl-7">
                            <div class="mil-menu-right-frame">
                                <div class="mil-animation-in">
                                    <div class="mil-animation-frame">
                                        <div class="mil-animation mil-position-1 mil-scale" data-value-1="2" data-value-2="2"></div>
                                    </div>
                                </div>
                                <div class="mil-menu-right">
                                    <div class="row">
                                        <div class="col-lg-8 mil-mb-60">
                                            <h6 class="mil-muted mil-mb-30">Publications</h6>
                                            <ul class="mil-menu-list">
                                                <li><a href="publication-food-insecurity.html" class="mil-light-soft">Food Insecurity</a></li>
                                                <li><a href="publication-food-waste.html" class="mil-light-soft">Food Waste</a></li>
                                                <li><a href="publication-rising-price.html" class="mil-light-soft">Rising prices</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="mil-divider mil-mb-60"></div>
                                    <div class="row justify-content-between">
                                        <div class="col-lg-4 mil-mb-60">
                                            <h6 class="mil-muted mil-mb-30">Canada</h6>
                                            <p class="mil-light-soft mil-up">200 University Avenue West, Waterloo, <span class="mil-no-wrap"> Ontario, N2L 3G1</span></p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- menu -->
        
        <!-- curtain -->
        <div class="mil-curtain"></div>
        <!-- curtain end -->

        <!-- frame -->
        <div class="mil-frame">
            <div class="mil-frame-top">
                <a href="index.html" class="mil-logo">C.</a>
                <div class="mil-menu-btn">
                    <span></span>
                </div>
            </div>
            <div class="mil-frame-bottom">
                <div class="mil-current-page"></div>
                <div class="mil-back-to-top">
                    <a href="#top" class="mil-link mil-dark mil-arrow-place">
                        <span>Back to top</span>
                    </a>
                </div>
            </div>
        </div>
        <!-- frame end -->

        <!-- content -->
        <div class="mil-content">
            <div id="swupMain" class="mil-main-transition">
                <!-- thank you section -->
                <section class="mil-soft-bg">
                    <div class="container mil-p-120-90">
                        <div class="row justify-content-center">
                            <div class="col-lg-8">


                                <!-- Direct Order Layout -->
                                <div class="mil-thankyou-card mil-direct-order" id="directOrderLayout">
                                    <div class="mil-success-icon">
                                        <i class="fas fa-check"></i>
                                    </div>
                                    
                                    <h2 class="mil-mb-30">Thank You!</h2>
                                    <p class="mil-mb-30">Your direct order has been successfully processed!</p>
                                    
                                    <div class="mil-order-details">
                                        <h5 class="mil-mb-20">Order Details</h5>
                                        
                                        <div class="mil-detail-row">
                                            <span class="mil-detail-label">Product:</span>
                                            <span class="mil-detail-value" id="directProduct">Green Apples</span>
                                        </div>
                                        
                                        <div class="mil-detail-row">
                                            <span class="mil-detail-label">Amount Paid:</span>
                                            <span class="mil-detail-value" id="directAmount">$2.99</span>
                                        </div>
                                        
                                        <div class="mil-detail-row">
                                            <span class="mil-detail-label">Order Type:</span>
                                            <span class="mil-detail-value">Direct Order</span>
                                        </div>
                                        
                                        <div class="mil-detail-row">
                                            <span class="mil-detail-label">Order Number:</span>
                                            <span class="mil-detail-value" id="directOrderNumber">ORD-12345</span>
                                        </div>
                                        
                                        <div class="mil-detail-row">
                                            <span class="mil-detail-label">Estimated Arrival:</span>
                                            <span class="mil-detail-value mil-arrival-time" id="directArrivalTime">Thursday, Dec 19th - 2:00 PM</span>
                                        </div>
                                    </div>
                                    
                                    <div class="mil-mb-30">
                                        <p class="mil-mb-20"><strong>What happens next?</strong></p>
                                        <ul style="text-align: left; color: #666;">
                                            <li>We've sent confirmation emails and SMS messages</li>
                                            <li>Pickup location details will be sent 24 hours before arrival</li>
                                            <li>You'll receive real-time updates on your order status</li>
                                        </ul>
                                    </div>
                                    
                                    <div class="mil-btn-row">
                                        <a href="beta.html" class="mil-button mil-arrow-place mil-mb-20">
                                            <span>Order More</span>
                                        </a>
                                        <a href="index.html" class="mil-button mil-arrow-place mil-accent-bg">
                                            <span>Back to Home</span>
                                        </a>
                                    </div>
                                </div>

                                <!-- Group Order Layout -->
                                <div class="mil-thankyou-card mil-group-order" id="groupOrderLayout">
                                    <div class="mil-success-icon">
                                        <i class="fas fa-check"></i>
                                    </div>
                                    
                                    <h2 class="mil-mb-30">Thank You!</h2>
                                    <p class="mil-mb-30">Your payment has been successfully processed. You're now part of our community group order!</p>
                                    
                                    <!-- Group Filled Notification -->
                                    <div class="mil-group-filled" id="groupFilledNotification" style="display: none;">
                                        <h5><i class="fas fa-star"></i> Group Order Filled!</h5>
                                        <p>Congratulations! Your group order has been filled and is now being processed. You'll receive pickup details shortly.</p>
                                    </div>
                                    
                                    <div class="mil-order-details">
                                        <h5 class="mil-mb-20">Order Details</h5>
                                        
                                        <div class="mil-detail-row">
                                            <span class="mil-detail-label">Product:</span>
                                            <span class="mil-detail-value" id="groupProduct">Green Apples</span>
                                        </div>
                                        
                                        <div class="mil-detail-row">
                                            <span class="mil-detail-label">Amount Paid:</span>
                                            <span class="mil-detail-value" id="groupAmount">$2.49</span>
                                        </div>
                                        
                                        <div class="mil-detail-row">
                                            <span class="mil-detail-label">Order Type:</span>
                                            <span class="mil-detail-value">Group Order</span>
                                        </div>
                                        
                                        <div class="mil-detail-row">
                                            <span class="mil-detail-label">Group Progress:</span>
                                            <span class="mil-detail-value" id="groupProgress">3 / 5</span>
                                        </div>
                                        
                                        <div class="mil-progress-bar">
                                            <div class="mil-progress-fill" id="progressFill" style="width: 60%"></div>
                                        </div>
                                        
                                        <div class="mil-detail-row">
                                            <span class="mil-detail-label">Estimated Arrival:</span>
                                            <span class="mil-detail-value mil-arrival-time" id="groupArrivalTime">Thursday, Dec 19th - 2:00 PM</span>
                                        </div>
                                    </div>
                                    
                                    <div class="mil-mb-30" id="groupNextSteps">
                                        <p class="mil-mb-20"><strong>What happens next?</strong></p>
                                        <ul style="text-align: left; color: #666;">
                                            <li>We'll notify you via email when the group fills</li>
                                            <li>If the group doesn't fill, you'll get a refund</li>
                                            <li>Pickup location details will be sent 24 hours before arrival</li>
                                        </ul>
                                    </div>
                                    
                                    <div class="mil-btn-row">
                                        <a href="beta.html" class="mil-button mil-arrow-place mil-mb-20">
                                            <span>Order More</span>
                                        </a>
                                        <a href="index.html" class="mil-button mil-arrow-place mil-accent-bg">
                                            <span>Back to Home</span>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <!-- thank you section end -->

                <!-- footer -->
                <footer class="mil-dark-bg">
                    <div class="mi-invert-fix">
                        <div class="container mil-p-120-60">
                            <div class="row justify-content-between">
                                <div class="col-md-4 col-lg-4 mil-mb-60">
                                    <div class="mil-muted mil-logo mil-up mil-mb-30">Corder.</div>
                                    <p class="mil-light-soft mil-up mil-mb-30">Subscribe to Corder:</p>
                                    <form action="https://formspree.io/f/mgvypldq" method="POST" class="mil-subscribe-form mil-up">
                                        <input type="email" name="email" placeholder="Enter your email" required>
                                        <button type="submit" class="mil-button mil-icon-button-sm mil-arrow-place"></button>
                                    </form>
                                </div>
                                <div class="col-md-7 col-lg-6">
                                    <div class="row justify-content-end">
                                        <div class="col-md-6 col-lg-7">
                                            <nav class="mil-footer-menu mil-mb-60">
                                                <ul>
                                                    <li class="mil-up">
                                                        <a href="index.html">Home</a>
                                                    </li>
                                                    <li class="mil-up">
                                                        <a href="services.html">Services</a>
                                                    </li>
                                                    <li class="mil-up">
                                                        <a href="contact.html">Contact</a>
                                                    </li>
                                                    <li class="mil-up">
                                                        <a href="blog.html">Blog</a>
                                                    </li>
                                                </ul>
                                            </nav>
                                        </div>
                                        <div class="col-md-6 col-lg-5">
                                            <ul class="mil-menu-list mil-up mil-mb-60">
                                                <li><a href="#." class="mil-light-soft">Privacy Policy</a></li>
                                                <li><a href="#." class="mil-light-soft">Terms and conditions</a></li>
                                                <li><a href="#." class="mil-light-soft">Cookie Policy</a></li>
                                                <li><a href="#." class="mil-light-soft">Careers</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row justify-content-between flex-sm-row-reverse">
                                <div class="col-md-7 col-lg-6">
                                    <div class="row justify-content-between">
                                        <div class="col-md-6 col-lg-5 mil-mb-60">
                                            <h6 class="mil-muted mil-up mil-mb-30">Canada</h6>
                                            <p class="mil-light-soft mil-up">200 University Avenue West, Waterloo, <span class="mil-no-wrap"> Ontario, N2L 3G1</span></p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 col-lg-6 mil-mb-60">
                                    <div class="mil-vert-between">
                                        <div class="mil-mb-30">
                                            <ul class="mil-social-icons mil-up">
                                                <li><a href="#." target="_blank" class="social-icon"> <i class="far fa-circle"></i></a></li>
                                                <li><a href="#." target="_blank" class="social-icon"> <i class="far fa-circle"></i></a></li>
                                                <li><a href="#." target="_blank" class="social-icon"> <i class="far fa-circle"></i></a></li>
                                                <li><a href="#." target="_blank" class="social-icon"> <i class="far fa-circle"></i></a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </footer>
                <!-- footer end -->

                <!-- hidden elements -->
                <div class="mil-hidden-elements">
                    <div class="mil-dodecahedron">
                        <div class="mil-pentagon">
                            <div></div>
                            <div></div>
                            <div></div>
                            <div></div>
                            <div></div>
                        </div>
                        <div class="mil-pentagon">
                            <div></div>
                            <div></div>
                            <div></div>
                            <div></div>
                            <div></div>
                        </div>
                        <div class="mil-pentagon">
                            <div></div>
                            <div></div>
                            <div></div>
                            <div></div>
                            <div></div>
                        </div>
                        <div class="mil-pentagon">
                            <div></div>
                            <div></div>
                            <div></div>
                            <div></div>
                            <div></div>
                        </div>
                        <div class="mil-pentagon">
                            <div></div>
                            <div></div>
                            <div></div>
                            <div></div>
                            <div></div>
                        </div>
                        <div class="mil-pentagon">
                            <div></div>
                            <div></div>
                            <div></div>
                            <div></div>
                            <div></div>
                        </div>
                        <div class="mil-pentagon">
                            <div></div>
                            <div></div>
                            <div></div>
                            <div></div>
                            <div></div>
                        </div>
                        <div class="mil-pentagon">
                            <div></div>
                            <div></div>
                            <div></div>
                            <div></div>
                            <div></div>
                        </div>
                        <div class="mil-pentagon">
                            <div></div>
                            <div></div>
                            <div></div>
                            <div></div>
                            <div></div>
                        </div>
                        <div class="mil-pentagon">
                            <div></div>
                            <div></div>
                            <div></div>
                            <div></div>
                            <div></div>
                        </div>
                        <div class="mil-pentagon">
                            <div></div>
                            <div></div>
                            <div></div>
                            <div></div>
                            <div></div>
                        </div>
                        <div class="mil-pentagon">
                            <div></div>
                            <div></div>
                            <div></div>
                            <div></div>
                            <div></div>
                        </div>
                    </div>

                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="mil-arrow">
                        <path d="M 14 5.3417969 C 13.744125 5.3417969 13.487969 5.4412187 13.292969 5.6367188 L 13.207031 5.7226562 C 12.816031 6.1136563 12.816031 6.7467188 13.207031 7.1367188 L 17.070312 11 L 4 11 C 3.448 11 3 11.448 3 12 C 3 12.552 3.448 13 4 13 L 17.070312 13 L 13.207031 16.863281 C 12.816031 17.254281 12.816031 17.887344 13.207031 18.277344 L 13.292969 18.363281 C 13.683969 18.754281 14.317031 18.754281 14.707031 18.363281 L 20.363281 12.707031 C 20.754281 12.316031 20.754281 11.682969 20.363281 11.292969 L 14.707031 5.6367188 C 14.511531 5.4412187 14.255875 5.3417969 14 5.3417969 z" />
                    </svg>

                    <svg width="250" viewBox="0 0 300 1404" fill="none" xmlns="http://www.w3.org/2000/svg" class="mil-lines">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M1 892L1 941H299V892C299 809.71 232.29 743 150 743C67.7096 743 1 809.71 1 892ZM0 942H300V892C300 809.157 232.843 742 150 742C67.1573 742 0 809.157 0 892L0 942Z" class="mil-move" />
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M299 146V97L1 97V146C1 228.29 67.7096 295 150 295C232.29 295 299 228.29 299 146ZM300 96L0 96V146C0 228.843 67.1573 296 150 296C232.843 296 300 228.843 300 146V96Z" class="mil-move" />
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M299 1H1V1403H299V1ZM0 0V1404H300V0H0Z" />
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M150 -4.37115e-08L150 1404L149 1404L149 0L150 -4.37115e-08Z" />
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M150 1324C232.29 1324 299 1257.29 299 1175C299 1092.71 232.29 1026 150 1026C67.7096 1026 1 1092.71 1 1175C1 1257.29 67.7096 1324 150 1324ZM150 1325C232.843 1325 300 1257.84 300 1175C300 1092.16 232.843 1025 150 1025C67.1573 1025 0 1092.16 0 1175C0 1257.84 67.1573 1325 150 1325Z" class="mil-move" />
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M300 1175H0V1174H300V1175Z" class="mil-move" />
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M150 678C232.29 678 299 611.29 299 529C299 446.71 232.29 380 150 380C67.7096 380 1 446.71 1 529C1 611.29 67.7096 678 150 678ZM150 679C232.843 679 300 611.843 300 529C300 446.157 232.843 379 150 379C67.1573 379 0 446.157 0 529C0 611.843 67.1573 679 150 679Z" class="mil-move" />
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M299 380H1V678H299V380ZM0 379V679H300V379H0Z" class="mil-move" />
                    </svg>
                </div>
                <!-- hidden elements end -->
            </div>
        </div>
        <!-- content -->
    </div>
    <!-- wrapper end -->

    <!-- jQuery js -->
    <script src="js/plugins/jquery.min.js"></script>
    <!-- swup js -->
    <script src="js/plugins/swup.min.js"></script>
    <!-- swiper js -->
    <script src="js/plugins/swiper.min.js"></script>
    <!-- fancybox js -->
    <script src="js/plugins/fancybox.min.js"></script>
    <!-- gsap js -->
    <script src="js/plugins/gsap.min.js"></script>
    <!-- scroll smoother -->
    <script src="js/plugins/smooth-scroll.js"></script>
    <!-- scroll trigger js -->
    <script src="js/plugins/ScrollTrigger.min.js"></script>
    <!-- scroll to js -->
    <script src="js/plugins/ScrollTo.min.js"></script>
    <!-- corder js -->
    <script src="js/main.js"></script>

    <script>
        // Global variables
        let currentOrderType = null;
        let currentProductId = null;
        let currentGroupOrderId = null;
        let progressUpdateInterval = null;

        // Function to fetch group order progress
        async function fetchGroupOrderProgress(productId, productName) {
            try {
                const functions = firebase.app().functions('us-central1');
                const getGroupOrderProgress = functions.httpsCallable('getGroupOrderProgress');
                
                const result = await getGroupOrderProgress({
                    productId: productId,
                    product_name: productName
                });
                
                return result.data;
            } catch (error) {
                console.error('Error fetching group order progress:', error);
                return {
                    currentCount: 0,
                    maxCount: null,
                    message: "Unable to fetch progress"
                };
            }
        }

        // Function to update group order progress
        function updateGroupProgress(progressData) {
            if (progressData.maxCount) {
                const progressPercentage = (progressData.currentCount / progressData.maxCount) * 100;
                document.getElementById('groupProgress').textContent = `${progressData.currentCount} / ${progressData.maxCount}`;
                document.getElementById('progressFill').style.width = `${progressPercentage}%`;
                
                // Check if group is filled
                if (progressData.currentCount >= progressData.maxCount) {
                    showGroupFilledNotification();
                }
            }
        }

        // Function to show group filled notification
        function showGroupFilledNotification() {
            const notification = document.getElementById('groupFilledNotification');
            const nextSteps = document.getElementById('groupNextSteps');
            
            notification.style.display = 'block';
            nextSteps.innerHTML = `
                <p class="mil-mb-20"><strong>What happens next?</strong></p>
                <ul style="text-align: left; color: #666;">
                    <li>Your group order has been filled!</li>
                    <li>We'll send pickup location details within 24 hours</li>
                    <li>You'll receive SMS and email confirmations</li>
                </ul>
            `;
        }

        // Function to start progress updates for group orders
        function startProgressUpdates(productId, productName) {
            // Initial fetch
            fetchGroupOrderProgress(productId, productName).then(updateGroupProgress);
            
            // Set up periodic updates every 10 seconds
            progressUpdateInterval = setInterval(async () => {
                const progressData = await fetchGroupOrderProgress(productId, productName);
                updateGroupProgress(progressData);
            }, 10000);
        }

        // Function to stop progress updates
        function stopProgressUpdates() {
            if (progressUpdateInterval) {
                clearInterval(progressUpdateInterval);
                progressUpdateInterval = null;
            }
        }

        // Function to show direct order layout
        function showDirectOrderLayout(orderData) {
            document.getElementById('directOrderLayout').style.display = 'block';
            
            // Populate direct order data
            document.getElementById('directProduct').textContent = orderData.product;
            document.getElementById('directAmount').textContent = orderData.amount;
            document.getElementById('directOrderNumber').textContent = orderData.orderNumber || 'ORD-' + Date.now();
            document.getElementById('directArrivalTime').textContent = orderData.arrivalTime;
        }

        // Function to show group order layout
        function showGroupOrderLayout(orderData) {
            document.getElementById('groupOrderLayout').style.display = 'block';
            
            // Populate group order data
            document.getElementById('groupProduct').textContent = orderData.product;
            document.getElementById('groupAmount').textContent = orderData.amount;
            document.getElementById('groupProgress').textContent = `${orderData.currentProgress} / ${orderData.maxProgress}`;
            document.getElementById('groupArrivalTime').textContent = orderData.arrivalTime;
            
            // Calculate and set progress bar
            const progressPercentage = (orderData.currentProgress / orderData.maxProgress) * 100;
            document.getElementById('progressFill').style.width = `${progressPercentage}%`;
            
            // Start real-time progress updates
            if (orderData.productId) {
                startProgressUpdates(orderData.productId, orderData.product);
            }
        }

        // Main initialization
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            
            // Get order details from URL parameters
            const product = urlParams.get('product') || 'Green Apples';
            const amount = urlParams.get('amount') || '$2.49';
            const orderType = urlParams.get('type') || 'Group Order';
            const currentProgress = parseInt(urlParams.get('progress')) || 3;
            const maxProgress = parseInt(urlParams.get('max')) || 5;
            const productId = urlParams.get('productId');
            const orderNumber = urlParams.get('orderNumber');
            
            // Set arrival time (3 days from now)
            const arrivalDate = new Date();
            arrivalDate.setDate(arrivalDate.getDate() + 3);
            const options = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'short', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            };
            const arrivalTime = arrivalDate.toLocaleDateString('en-US', options);
            
            // Prepare order data
            const orderData = {
                product: product,
                amount: amount,
                arrivalTime: arrivalTime,
                currentProgress: currentProgress,
                maxProgress: maxProgress,
                productId: productId,
                orderNumber: orderNumber
            };
            
            // Show appropriate layout based on order type
            if (orderType === 'Direct Order') {
                showDirectOrderLayout(orderData);
            } else {
                showGroupOrderLayout(orderData);
            }
            
            // Clean up when page is unloaded
            window.addEventListener('beforeunload', stopProgressUpdates);
        });
    </script>

</body>

</html> 